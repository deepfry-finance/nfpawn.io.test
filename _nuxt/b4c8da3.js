(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{609:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),y=n(235),c=n(180),l=n(151),d=new l.ContractAbi([{inputs:[{internalType:"uint24",name:"initialFeePortion",type:"uint24"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"actor",type:"address"},{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"uint256",name:"timeCollateralAtRisk",type:"uint256"},{internalType:"address",name:"liquidator",type:"address"}],indexed:!1,internalType:"struct NFPawn.BuyBackOffer",name:"buybackOffer",type:"tuple"}],name:"BuyBackOfferExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"uint256",name:"timeCollateralAtRisk",type:"uint256"},{internalType:"address",name:"liquidator",type:"address"}],indexed:!1,internalType:"struct NFPawn.BuyBackOffer",name:"buybackOffer",type:"tuple"}],name:"BuyBackOfferRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"bytes32",name:"root",type:"bytes32"}],name:"RootDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],indexed:!1,internalType:"struct NFPawn.BuyBackOfferInput",name:"input",type:"tuple"}],name:"SoldWithBuybackOffer",type:"event"},{inputs:[],name:"activateNewFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"calculateFrom",type:"uint256"}],name:"calculateFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"root",type:"bytes32"}],name:"deactivateRoot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"}],name:"executeBuyback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeFrozenUntil",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feePortion",outputs:[{internalType:"uint24",name:"",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],internalType:"struct NFPawn.BuyBackOfferInput",name:"_input",type:"tuple"}],name:"generateHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"inviteNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"invitedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_claim",type:"bytes32"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"isValidSignature",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"newFeePortion",outputs:[{internalType:"uint24",name:"",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint24",name:"proposedFee",type:"uint24"}],name:"proposeNewFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_claim",type:"bytes32"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"recoverSigner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"}],name:"revokeBuyback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],internalType:"struct NFPawn.BuyBackOfferInput",name:"_input",type:"tuple"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"sellWithBuybackOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC20",name:"valueContract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"takeFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"takeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(l.Contract)},612:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),y=n(235),c=n(180),l=n(151),d=new l.ContractAbi([{inputs:[{internalType:"bytes4",name:"_interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(l.Contract)},613:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),y=n(235),c=n(180),l=n(151),d=new l.ContractAbi([{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_approved",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"_approved",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.a)(e);if(t){var o=Object(c.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(y.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(l.Contract)},626:function(e,t,n){"use strict";n.r(t);var r=n(7),o=(n(30),n(77),n(78),n(41),n(4)),address=n(15),y=n(612),c=n(613),l=n(609),d=n(149),f=o.a.extend({layout:"app",middleware:["require-auth"],data:function(){return{offers:[],approved:!1}},methods:{loadNftOffers:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(d.toChecksumAddress)(e.$route.params.contractId),r=e.$route.params.id,t.next=4,e.$axios.get("".concat("https://api-test.nfpawn.io","/offers?filterNftContract=").concat(n,"&filterNftIds[0]=").concat(r)).then((function(t){e.offers=t.data.data}));case 4:case"end":return t.stop()}}),t)})))()},loadAppoved:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(d.toChecksumAddress)(e.$route.params.contractId),r=e.$route.params.id,t.next=4,e.$eth.getAccounts();case 4:return o=t.sent[0],t.next=7,e.isNftApproved(o,n,r);case 7:e.approved=t.sent;case 8:case"end":return t.stop()}}),t)})))()},approve:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$eth.getAccounts();case 2:return n=t.sent[0],t.next=5,e.approveNft(n,e.$route.params.contractId,e.$route.params.id);case 5:case"end":return t.stop()}}),t)})))()},takeOffer:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,y;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$eth.getAccounts();case 3:return r=n.sent[0],o={offeror:e.offeror,nftContract:e.nftContract,nftId:e.nftId,saleExpiration:e.saleExpiration,saleContract:e.saleContract,saleAmount:e.saleAmount,buybackContract:e.buybackContract,buybackAmount:e.buybackAmount,proofs:e.proofs,termUntilCollateralAtRisk:e.termUntilCollateralAtRisk},y={r:e.signature.substr(0,66),s:"0x".concat(e.signature.substr(66,64)),v:parseInt("0x".concat(e.signature.substr(130,2))).toString(),kind:2},n.next=8,t.pawn(r,o,y);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},isErc721:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new y.a(t.$eth,e),n.next=3,r.methods.supportsInterface("0x80ac58cd").call();case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},approveNft:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var y,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return y=address.Address.fromString("0x9f8630d433a74fc06cc5232eeb62d6c59c4508c1"),l=address.Address.fromString(t),d=new c.a(o.$eth,l),r.next=5,o.isErc721(l);case 5:if(!r.sent){r.next=11;break}return r.next=8,d.methods.setApprovalForAll(y,!0).send({from:e}).getTxHash();case 8:r.sent,r.next=14;break;case 11:return r.next=13,d.methods.approve(y,n).send({from:e}).getTxHash();case 13:r.sent;case 14:case"end":return r.stop()}}),r)})))()},isNftApproved:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var y,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return y=address.Address.fromString("0x9f8630d433a74fc06cc5232eeb62d6c59c4508c1"),l=address.Address.fromString(t),d=new c.a(o.$eth,l),r.next=5,o.isErc721(l);case 5:if(!r.sent){r.next=11;break}return r.next=8,d.methods.isApprovedForAll(e,y).call();case 8:return r.abrupt("return",r.sent);case 11:return r.next=13,d.methods.getApproved(n).call();case 13:return r.t0=r.sent,r.t1=e,r.abrupt("return",r.t0==r.t1);case 16:case"end":return r.stop()}}),r)})))()},pawn:function(e,t,n){var o=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var y,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return y=address.Address.fromString("0x9f8630d433a74fc06cc5232eeb62d6c59c4508c1"),c=new l.a(o.$eth,y),r.next=5,c.methods.sellWithBuybackOffer(t,n).send({from:e});case 5:r.next=8;break;case 7:throw new Error("nfpawnContract not assigned");case 8:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadNftOffers();case 3:return t.next=5,e.loadAppoved();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}),m=n(29),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Best offers")]),e._v(" "),n("p",[e._v("All offers are limited time offers made by independent brokers not endorsed or reviewed by NF Pawn.")]),e._v(" "),n("p",[e._v("Is approved: "+e._s(e.approved)+" "),e.approved?e._e():n("button",{on:{click:function(t){return e.approve()}}},[e._v("Approve")])]),e._v(" "),n("ul",e._l(e.offers,(function(t){return n("li",{key:t.id},[n("button",{on:{click:function(n){return e.takeOffer(t)}}},[e._v(e._s(t.saleAmount)+" "+e._s(t.merkleProofs))])])})),0)])}),[],!1,null,null,null);t.default=component.exports}}]);