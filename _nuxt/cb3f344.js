(window.webpackJsonp=window.webpackJsonp||[]).push([[18,5],{608:function(e,t,n){"use strict";n.r(t);n(374);var r=n(4).a.extend({layout:"app",props:{total:Number,skip:Number,limit:Number},computed:{currentPage:function(){return this.limit?Math.floor(this.skip/this.limit):0},availablePages:function(){return this.limit?Math.ceil(this.total/this.limit):0}},methods:{loadPage:function(e){this.$emit("page",{skip:e*this.limit})},back:function(){this.currentPage-1>=0&&this.loadPage(this.currentPage-1)},next:function(){this.currentPage+1<=this.availablePages-1&&this.loadPage(this.currentPage+1)}}}),o=n(29),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},[n("div",{staticClass:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},[n("div",[n("p",{staticClass:"text-sm text-gray-700"},[e._v("\n        Showing page\n        "),n("span",{staticClass:"font-medium"},[e._v(e._s(e.currentPage+1))]),e._v("\n        of\n        "),n("span",{staticClass:"font-medium"},[e._v(e._s(e.availablePages))])])]),e._v(" "),n("div",[n("nav",{staticClass:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px rounded-l-md border border-gray-300 overflow-hidden",attrs:{"aria-label":"Pagination"}},[e.currentPage-1>=0?n("a",{staticClass:"cursor-pointer relative inline-flex items-center px-2 py-2 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",on:{click:function(t){return t.preventDefault(),e.back()}}},[n("span",{staticClass:"sr-only"},[e._v("Previous")]),e._v(" "),n("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"}})])]):e._e(),e._v(" "),e._l(e.availablePages,(function(t){return n("a",{key:t,staticClass:"cursor-pointer relative inline-flex items-center px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",class:t-1==e.currentPage?"text-purple-400 bg-gray-100":"",on:{click:function(n){return n.preventDefault(),e.loadPage(t-1)}}},[e._v("\n          "+e._s(t)+"\n        ")])})),e._v(" "),e.currentPage+1<=e.availablePages-1?n("a",{staticClass:"cursor-pointer relative inline-flex items-center px-2 py-2 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",on:{click:function(t){return t.preventDefault(),e.next()}}},[n("span",{staticClass:"sr-only"},[e._v("Next")]),e._v(" "),n("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}})])]):e._e()],2)])])])}),[],!1,null,null,null);t.default=component.exports},609:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),c=n(235),l=n(180),y=n(151),d=new y.ContractAbi([{inputs:[{internalType:"uint24",name:"initialFeePortion",type:"uint24"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"actor",type:"address"},{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"uint256",name:"timeCollateralAtRisk",type:"uint256"},{internalType:"address",name:"liquidator",type:"address"}],indexed:!1,internalType:"struct NFPawn.BuyBackOffer",name:"buybackOffer",type:"tuple"}],name:"BuyBackOfferExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"uint256",name:"timeCollateralAtRisk",type:"uint256"},{internalType:"address",name:"liquidator",type:"address"}],indexed:!1,internalType:"struct NFPawn.BuyBackOffer",name:"buybackOffer",type:"tuple"}],name:"BuyBackOfferRevoked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"bytes32",name:"root",type:"bytes32"}],name:"RootDeactivated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"offeror",type:"address"},{indexed:!0,internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"},{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],indexed:!1,internalType:"struct NFPawn.BuyBackOfferInput",name:"input",type:"tuple"}],name:"SoldWithBuybackOffer",type:"event"},{inputs:[],name:"activateNewFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"calculateFrom",type:"uint256"}],name:"calculateFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"root",type:"bytes32"}],name:"deactivateRoot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"}],name:"executeBuyback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"feeFrozenUntil",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"feePortion",outputs:[{internalType:"uint24",name:"",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],internalType:"struct NFPawn.BuyBackOfferInput",name:"_input",type:"tuple"}],name:"generateHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"inviteNewOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"invitedOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_claim",type:"bytes32"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"isValidSignature",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"newFeePortion",outputs:[{internalType:"uint24",name:"",type:"uint24"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"},{internalType:"uint256",name:"",type:"uint256"},{internalType:"bytes",name:"",type:"bytes"}],name:"onERC721Received",outputs:[{internalType:"bytes4",name:"",type:"bytes4"}],stateMutability:"pure",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint24",name:"proposedFee",type:"uint24"}],name:"proposeNewFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"_claim",type:"bytes32"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"recoverSigner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"bytes32",name:"buybackOfferHash",type:"bytes32"}],name:"revokeBuyback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{internalType:"address",name:"offeror",type:"address"},{internalType:"contract ERC721",name:"nftContract",type:"address"},{internalType:"uint256",name:"nftId",type:"uint256"},{internalType:"uint256",name:"saleExpiration",type:"uint256"},{internalType:"contract ERC20",name:"saleContract",type:"address"},{internalType:"uint256",name:"saleAmount",type:"uint256"},{internalType:"uint256",name:"termUntilCollateralAtRisk",type:"uint256"},{internalType:"contract ERC20",name:"buybackContract",type:"address"},{internalType:"uint256",name:"buybackAmount",type:"uint256"},{internalType:"bytes32[]",name:"proofs",type:"bytes32[]"}],internalType:"struct NFPawn.BuyBackOfferInput",name:"_input",type:"tuple"},{components:[{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"enum SignatureUtil.SignatureKind",name:"kind",type:"uint8"}],internalType:"struct SignatureUtil.SignatureData",name:"_signature",type:"tuple"}],name:"sellWithBuybackOffer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract ERC20",name:"valueContract",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"takeFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"takeOwnership",outputs:[],stateMutability:"nonpayable",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(y.Contract)},612:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),c=n(235),l=n(180),y=n(151),d=new y.ContractAbi([{inputs:[{internalType:"bytes4",name:"_interfaceID",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(y.Contract)},613:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n(373);var r=n(101),o=n(234),c=n(235),l=n(180),y=n(151),d=new y.ContractAbi([{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_approved",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_owner",type:"address"},{indexed:!0,internalType:"address",name:"_operator",type:"address"},{indexed:!1,internalType:"bool",name:"_approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_from",type:"address"},{indexed:!0,internalType:"address",name:"_to",type:"address"},{indexed:!0,internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[{internalType:"address",name:"_approved",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_owner",type:"address"},{internalType:"address",name:"_operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_operator",type:"address"},{internalType:"bool",name:"_approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_from",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}]);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var o=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(e){Object(o.a)(n,e);var t=f(n);function n(e,address,o){return Object(r.a)(this,n),t.call(this,e,d,address,o)}return n}(y.Contract)},621:function(e,t,n){"use strict";n.r(t);var r,o=n(7),c=(n(41),n(30),n(77),n(78),n(53),n(54),n(58),n(181),n(375),n(4)),address=n(15),l=n(612),y=n(613),d=n(609),f=n(124);!function(e){e[e.ERROR=-1]="ERROR",e[e.UNAPPROVED=0]="UNAPPROVED",e[e.APPROVING=1]="APPROVING",e[e.APPROVED=2]="APPROVED",e[e.TAKING=3]="TAKING"}(r||(r={}));var m=c.a.extend({layout:"app",data:function(){return{nfpawnAddress:address.Address.fromString("0x9f8630d433a74fc06cc5232eeb62d6c59c4508c1"),total:0,offers:[]}},computed:{account:function(){return this.$store.state.auth.account},signature:function(){return this.$store.getters["auth/signature"]},skip:function(){return parseInt((this.$route.query.skip||"0").toString())},limit:function(){return parseInt((this.$route.query.limit||"25").toString())}},filters:{formatDate:function(e){return Intl.DateTimeFormat("us-EN").format(new Date(parseInt("".concat(e,"000"))))},formatColleteral:function(e){return Object(f.b)(e)},formatAddress:function(e){return"".concat(e.substr(0,5),"...").concat(e.substr(-3))}},methods:{onPage:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.loadOffersFrom(e.skip));case 1:case"end":return n.stop()}}),n)})))()},isErc721:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new l.a(t.$eth,e),n.next=3,r.methods.supportsInterface("0x80ac58cd").call();case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},isNftApproved:function(e,t){var n=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new l.a(n.$eth,e),c=new y.a(n.$eth,e),r.next=4,o.methods.supportsInterface("0x80ac58cd").call();case 4:if(!r.sent){r.next=10;break}return r.next=7,c.methods.isApprovedForAll(n.account,n.nfpawnAddress).call();case 7:return r.abrupt("return",r.sent);case 10:return r.next=12,c.methods.getApproved(t).call();case 12:return r.t0=r.sent,r.t1=n.account,r.abrupt("return",r.t0==r.t1);case 15:case"end":return r.stop()}}),r)})))()},reloadAssets:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("assets/reload");case 2:case"end":return t.stop()}}),t)})))()},reloadOffers:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadOffersFrom(e.skip);case 2:case"end":return t.stop()}}),t)})))()},loadOffersFrom:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$axios.get("".concat("https://api-test.nfpawn.io","/offers?skip=").concat(e,"&limit=").concat(t.limit),{headers:{authorization:t.signature}});case 2:return c=n.sent,t.total=c.data.meta.totalCount,n.next=6,Promise.all(c.data.data.map(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.asset=t.$store.getters["assets/getAsset"]({contract:n.nftContract,id:n.nftId})||{},n.saleAmountReadable=Object(f.d)(n.saleAmount),n.buybackAmountReadable=Object(f.d)(n.buybackAmount),!t.$store.getters["txs/hasTag"]("sell/offers/approve/".concat(n.id))){e.next=7;break}n.step=r.APPROVING,e.next=18;break;case 7:if(!t.$store.getters["txs/hasTag"]("sell/offers/take/".concat(n.id))){e.next=11;break}n.step=r.TAKING,e.next=18;break;case 11:return e.next=13,t.isNftApproved(address.Address.fromString(n.nftContract),n.nftId);case 13:if(!e.sent){e.next=17;break}n.step=r.APPROVED,e.next=18;break;case 17:n.step=r.UNAPPROVED;case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:t.offers=n.sent,t.$router.push("".concat(t.$route.path,"?skip=").concat(c.data.meta.skip,"&limit=").concat(c.data.meta.limit));case 8:case"end":return n.stop()}}),n)})))()},approveOfferAt:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,d,f,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.offers[e],l=address.Address.fromString(o.nftContract),d=o.nftId,n.next=5,t.isNftApproved(l,d);case 5:if(!n.sent){n.next=9;break}c.a.set(t.offers,e,Object.assign(o,{step:r.APPROVED})),n.next=29;break;case 9:return n.prev=9,f=new y.a(t.$eth,l),n.next=13,t.isErc721(l);case 13:if(!n.sent){n.next=19;break}return n.next=16,f.methods.setApprovalForAll(t.nfpawnAddress,!0).send({from:t.account}).getTxHash();case 16:n.t0=n.sent,n.next=22;break;case 19:return n.next=21,f.methods.approve(t.nfpawnAddress,d).send({from:t.account}).getTxHash();case 21:n.t0=n.sent;case 22:m=n.t0,c.a.set(t.offers,e,Object.assign(o,{hash:m,step:r.APPROVING})),t.$store.commit("txs/regTx",{hash:m,tag:"sell/offers/approve/".concat(o.id)}),n.next=29;break;case 27:n.prev=27,n.t1=n.catch(9);case 29:case"end":return n.stop()}}),n,null,[[9,27]])})))()},takeOfferAt:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,l,y,f;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=t.offers[e],l={r:o.signature.substr(0,66),s:"0x".concat(o.signature.substr(66,64)),v:parseInt("0x".concat(o.signature.substr(130,2))).toString(),kind:0},y=new d.a(t.$eth,t.nfpawnAddress),n.next=6,y.methods.sellWithBuybackOffer(o,l).send({from:t.account}).getTxHash();case 6:f=n.sent,c.a.set(t.offers,e,Object.assign(o,{hash:f,step:r.TAKING})),t.$store.commit("txs/regTx",{hash:f,tag:"sell/offers/take/".concat(o.id)}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.log(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})))()},moveOfferState:function(e){var t=e.hash,n=e.tag,o=e.ok,l=n.split(/\//)[3],y=this.offers.findIndex((function(e){return e.id==l}));if(-1!=y){var d=this.offers[y];o?0==n.indexOf("sell/offers/approve/")&&d.step==r.APPROVING?c.a.set(this.offers,y,Object.assign(d,{hash:t,step:r.APPROVED})):0==n.indexOf("sell/offers/take/")&&d.step==r.TAKING&&this.offers.splice(y,1):c.a.set(this.offers,y,Object.assign(d,{hash:t,step:r.ERROR}))}}},mounted:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.$store.subscribe((function(t,n){"txs/unregTx"==t.type&&0==t.payload.tag.indexOf("sell/offers")?e.moveOfferState(t.payload):"page/setLoading"!=t.type||t.payload||e.loadOffersFrom(e.skip).catch((function(e){return console.log(e)}))})),0!=e.offers.length){t.next=4;break}return t.next=4,e.loadOffersFrom(e.skip).catch((function(e){return console.log(e)}));case 4:case"end":return t.stop()}}),t)})))()}}),v=n(29),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col h-screen"},[n("div",{staticClass:"text-black bg-white h-16 px-5"},[n("div",{staticClass:"float-right py-3"},[n("button",{staticClass:"bg-purple-600 text-white font-semibold mb-4 rounded inline-block items-center px-4 py-1",on:{click:function(t){return e.reloadOffers()}}},[e._v("Reload Offers")]),e._v(" "),n("button",{staticClass:"text-purple-600 font-semibold mb-4 rounded inline-block items-center px-4 py-1",on:{click:function(t){return e.reloadAssets()}}},[e._v("Reload Assets")])]),e._v(" "),n("div",{staticClass:"py-5 pl-2"},[e._v("\n      Pawn / Sale\n    ")])]),e._v(" "),n("div",{staticClass:"flex-1 overflow-y-auto p-14"},[e._m(0),e._v(" "),n("div",{staticClass:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},[e.offers.length>0?n("table",{staticClass:"min-w-full divide-y divide-gray-200"},[e._m(1),e._v(" "),n("tbody",{staticClass:"bg-white divide-y divide-gray-200"},e._l(e.offers,(function(t,r){return n("tr",{key:t.id},[n("td",{staticClass:"px-6 py-4 whitespace-nowrap text-base"},[t.asset.assetImageUrl?n("img",{staticClass:"rounded float-left box-border h-16 w-16 mr-2 inline-block",attrs:{src:t.asset.assetImageUrl}}):e._e(),e._v(" "),n("div",{staticClass:"pt-2"},[n("span",{staticClass:"font-bold text-gray-400"},[e._v("["+e._s(t.asset.projectSymbol)+"]")]),e._v(" "),n("span",{staticClass:"font-bold"},[e._v(e._s(t.asset.projectName))]),e._v(" "),n("br"),e._v(" "),n("span",{staticClass:"text-xs"},[e._v("#"+e._s(t.nftId)+",")]),e._v(" "),n("span",{staticClass:"text-xs"},[e._v(e._s(e._f("formatAddress")(t.nftContract)))])])]),e._v(" "),n("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[n("span",[e._v(e._s(t.saleAmountReadable))])]),e._v(" "),n("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[n("span",[e._v(e._s(t.buybackAmountReadable))])]),e._v(" "),n("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[n("span",[e._v(e._s(e._f("formatColleteral")(t.termUntilCollateralAtRisk)))])]),e._v(" "),n("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[e._v("\n            "+e._s(e._f("formatDate")(t.saleExpiration))+"\n          ")]),e._v(" "),n("td",{staticClass:"text-center"},[0==t.step?n("button",{staticClass:"whitespace-nowrap inline-flex items-center justify-center px-4 py-1 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-purple-600 hover:bg-purple-700",on:{click:function(t){return e.approveOfferAt(r)}}},[e._v("Approve")]):1==t.step||3==t.step?n("div",{staticClass:"flex justify-center"},[n("svg",{staticClass:"animate-spin h-5 w-5 text-purple-700",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[n("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),e._v(" "),n("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}})])]):2==t.step?n("button",{staticClass:"whitespace-nowrap inline-flex items-center justify-center px-4 py-1 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-purple-600 hover:bg-purple-700",on:{click:function(t){return e.takeOfferAt(r)}}},[e._v("Pawn")]):n("span",[e._v("Error("+e._s(t.step)+")!")])])])})),0)]):n("div",{staticClass:"text-center bg-white p-10"},[e._v("\n      No offers found\n    ")])])]),e._v(" "),n("div",{staticClass:"text-center text-black bg-white h-16"},[n("Pagination",{attrs:{total:e.total,skip:e.skip,limit:e.limit},on:{page:e.onPage}})],1)])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pb-5"},[n("div",{staticClass:"text-xl text-gray-400 max-w-xl"},[e._v("\n        All offers are limited time offers made by independent brokers not endorsed or reviewed by NF Pawn.\n      ")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",{staticClass:"bg-gray-50"},[n("tr",[n("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col"}},[e._v("\n            Asset\n          ")]),e._v(" "),n("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col"}},[e._v("\n            Borrowed\n          ")]),e._v(" "),n("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col"}},[e._v("\n            Returned\n          ")]),e._v(" "),n("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col"}},[e._v("\n            Return in\n          ")]),e._v(" "),n("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col",colspan:"2"}},[e._v("\n            Due Date\n          ")])])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{Pagination:n(608).default})}}]);