(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{624:function(t,e,r){"use strict";r.r(e);var n=r(7),o=(r(41),r(182),r(181),r(4)),F=r(15),c=r(237),d=o.a.extend({data:function(){return{nfpawnAddress:F.Address.fromString("0x9f8630d433a74fc06cc5232eeb62d6c59c4508c1")}},computed:{account:function(){return this.$store.state.auth.account},saleContracts:function(){return this.$store.state["offers-new"].saleContracts},allContractsApproved:function(){return!this.$store.state["offers-new"].saleContracts.find((function(t){return!t.approved}))}},methods:{approveContract:function(address){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new c.a(t.$eth,address),"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE",e.prev=2,e.next=5,r.methods.approve(t.nfpawnAddress,"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE").send({from:t.account}).getTxHash();case 5:n=e.sent,t.$store.commit("offers-new/updateSaleContract",{address:address,data:{hash:n,status:2}}),t.$store.commit("txs/regTx",{hash:n,tag:"offers-new/saleContracts/approve/".concat(address)}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error: Approval canceled",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},submit:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("offers-new/upload");case 3:e.sent,t.$toast.success("Offer successfully created"),t.$router.push({path:"/offers"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t.$toast.error("Looks like such offer already exists"),console.log("Error: Upload failed ",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},moveContractState:function(t){var e=t.hash,r=t.tag,n=t.ok,address=r.split(/\//)[3];n?0==r.indexOf("offers-new/saleContracts/approve/")&&this.$store.commit("offers-new/updateSaleContract",{address:address,data:{hash:e,status:1}}):this.$store.commit("offers-new/updateSaleContract",{address:address,data:{hash:e,status:3}})}},mounted:function(){var t=this;this.$store.subscribe((function(e,r){"txs/unregTx"==e.type&&0==e.payload.tag.indexOf("offers-new/saleContracts")&&t.moveContractState(e.payload)})),this.saleContracts.length<=0&&(this.$toast.error("No valid sale contracts found"),this.$router.push("/offers/new"))}}),l=r(29),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"text-xl text-gray-400 max-w-xl"},[t._v("\n    All offers are limited time offers made by independent brokers not endorsed or reviewed by NF Pawn.\n  ")]),t._v(" "),r("div",{staticClass:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg"},[r("table",{staticClass:"min-w-full divide-y divide-gray-200 mt-5"},[t._m(0),t._v(" "),r("tbody",{staticClass:"bg-white divide-y divide-gray-200"},t._l(t.saleContracts,(function(e){return r("tr",{key:e.id},[r("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[r("img",{staticClass:"box-border h-16 w-16 mr-2 float-left",attrs:{src:e.logoURI}}),t._v(" "),r("div",{staticClass:"text-sm font-bold mt-2"},[t._v(t._s(e.symbol))]),t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),r("td",{staticClass:"relative px-6 text-right"},[0==e.status?r("button",{staticClass:"mt-4 border-2 border-purple-400 text-purple-400 font-semibold mb-4 rounded inline-block items-center px-4 py-2",on:{click:function(r){return t.approveContract(e.address)}}},[r("span",[t._v("Approve")])]):1==e.status?r("span",{staticClass:"text-green-400"},[t._v("Approved")]):3==e.status?r("span",{staticClass:"text-red-400"},[t._v("Failed")]):r("span",[t._v("Pending ...")])])])})),0)])]),t._v(" "),t.allContractsApproved?r("div",{staticClass:"text-gray-400 mt-5"},[t._v("Approve all assets to continue.")]):r("button",{staticClass:"mt-5 bg-purple-400 text-white font-semibold mb-4 rounded inline-block items-center px-4 py-2",on:{click:t.submit}},[t._v("Submit your offers")])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"bg-gray-50"},[r("tr",[r("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",attrs:{scope:"col",colspan:"2"}},[t._v("\n            Asset\n          ")])])])}],!1,null,null,null);e.default=component.exports}}]);